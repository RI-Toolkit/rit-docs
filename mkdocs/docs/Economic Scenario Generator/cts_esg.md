# Continuous-Time Generator

The continuous-time economic scenario generator simulates the trajectories of: 

(1) Australia zero-coupon bond rates maturing every quarter from 3 months up to 10 years, i.e., 0.25 years, 0.5 years, 0.75 years, ..., 10 years, 

(2) NSW home value index,  

(3) S&P/ASX200 price. 

The zero-coupon bond term structure is fitted using the arbitrage-free Nelson-Siegel model, while NSW home value index and S&P/ASX200 price are assumed to be Geometric Brownian Motions that are correlated with the zero-coupon bond rates. 

The independent-factor model assumes that the level, slope, and curvature of the risk-free rate are mutually independent, while the correlated-factor model assumes dependence among them. Simulations generated by the correlated-factor models are more volatile since more parameters are involved. Further suggestions on model selection can be found in section "Choosing an Appropriate Model" below. 

Denote $X^1$ the level, $X^2$ the slope, $X^3$ the curvature of the risk-free rate, $X^4$ the logged NSW home value index, $X^5$ the logged S&P/ASX200 price, and $W^1, \cdots, W^5$ the standard Brownian Motions. Under the real-world measure, the independent-factor model satisfies the following stochastic differential equation: 

![](https://latex.codecogs.com/svg.image?dX_t^1&space;=&space;[\theta_1&space;-&space;\kappa_{11}X_t^1&space;]dt&space;&plus;&space;\sigma_{11}&space;dW_t^1,)

![](https://latex.codecogs.com/svg.image?dX_t^2&space;=&space;[\theta_2&space;-&space;\kappa_{22}&space;X_t^2&space;]dt&space;&plus;&space;\sigma_{22}&space;dW_t^2,)

![](https://latex.codecogs.com/svg.image?dX_t^3&space;=&space;[\theta_3&space;-\kappa_{33}&space;X_t^3]&space;dt&space;&plus;&space;\sigma_{33}&space;dW_t^3,)

![](https://latex.codecogs.com/svg.image?dX_t^4&space;=&space;[\theta_4&space;&plus;&space;X_t^1&space;&plus;&space;X_t^2]dt&space;&plus;&space;\sum_{i=1}^4&space;\sigma_{4i}&space;dW_t^i,)

![](https://latex.codecogs.com/svg.image?dX_t^5&space;=&space;[\theta_5&space;&plus;&space;X_t^1&space;&plus;&space;X_t^2]dt&space;&plus;&space;\sum_{i=1}^5&space;\sigma_{5i}&space;dW_t^i&space;,)

while the correlated-factor model satisfies 

![](https://latex.codecogs.com/svg.image?dX_t^1&space;=&space;[\theta_1&space;-&space;\sum_{i=1}^3&space;\kappa_{1i}&space;X_t^i&space;]dt&space;&plus;&space;\sigma_{11}&space;dW_t^1,)

![](https://latex.codecogs.com/svg.image?dX_t^2&space;=&space;[\theta_2&space;-&space;\sum_{i=1}^3&space;\kappa_{2i}&space;X_t^i]dt&space;&plus;&space;\sum_{i=1}^2&space;\sigma_{2i}&space;dW_t^i,)

![](https://latex.codecogs.com/svg.image?dX_t^3&space;=&space;[\theta_3&space;-&space;\sum_{i=1}^3&space;\kappa_{3i}&space;X_t^i]&space;dt&space;&space;&plus;&space;\sum_{i=1}^3&space;\sigma_{3i}&space;dW_t^i,)

![](https://latex.codecogs.com/svg.image?dX_t^4&space;=&space;[\theta_4&space;&plus;&space;X_t^1&space;&plus;&space;X_t^2]&space;dt&space;&plus;&space;\sum_{i=1}^4&space;\sigma_{4i}&space;dW_t^i,)

![](https://latex.codecogs.com/svg.image?dX_t^5&space;=&space;[\theta_5&space;&plus;&space;X_t^1&space;&plus;&space;X_t^2]&space;dt&space;&plus;&space;\sum_{i=1}^5&space;\sigma_{5i}&space;dW_t^i.)

The results are still depicted with the same simulation frequency options as the discrete case, but the calculations are based in continuous time. 

---

**get_afns_simulation(num_years = 5, num_paths = 10, frequency = 'month', perc_change = FALSE, type = 'independent', model = 'interest_rate')**

&nbsp;&nbsp; **Paramters:**

&nbsp;&nbsp;&nbsp;&nbsp; num_years : numeric

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *integer denoting number of years to forecast from 2021-06-01*

&nbsp;&nbsp;&nbsp;&nbsp; num_paths : numeric

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *integer denoting the number of simulation paths*

&nbsp;&nbsp;&nbsp;&nbsp; frequency : character

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *'year', 'quarter' or 'month' denoting the simulation frequency*

&nbsp;&nbsp;&nbsp;&nbsp; perc_change : logical

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *set TRUE for outputs to be expressed as period-by-period percent change. The reference level, i.e., the original values in the first output period, will be appended above the percentage changes for each variable and each trajectory. See note (a) below. *

&nbsp;&nbsp;&nbsp;&nbsp; type : character

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *'independent' or 'correlated' denoting whether the latent factors are independent of each other*

&nbsp;&nbsp;&nbsp;&nbsp; model : character

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *'interest_rate' or 'interest_house_stock' denoting the output variables*

&nbsp;&nbsp; **Returns:**

&nbsp;&nbsp;&nbsp;&nbsp; A list of 40 dataframes containing simulated interest rates with maturities from 1 quarter up to 10 years, or 42 dataframes containing interest rates, NSW house value index, S&P/ASX200 closing prices if model is set to be interest_house_stock. See note (b) for explanations on the negativity of output values. 

&nbsp;&nbsp; **Usage:**

```r
# simulate 10 years of data 
sim <- get_afns_simulation(num_years = 10, num_paths = 10000, frequency = 'year', type = 'independent', model = 'interest_house_stock')

# suppose we wish to look at the 3-month zero-coupon bond rates
sim$maturity_1qtrs

# suppose we wish to look at the 5-year zero-coupon bond rates
sim$maturity_20qtrs

# NSW house value index 
sim$house_index

# S&P/ASX200 closing price 
sim$stock_price 
```

&nbsp;&nbsp; **Choosing an Appropriate Model:**

* Choosing between models "interest_rate" and "interest_house_stock":  
    
    The "interest_house_stock" model assumes dependency between interest rates, stock prices, and house indexes. Therefore, this model takes a more holistic view on the movements of those financial variables. 
        
    However, a drawback is that the simulated paths will be more volatile than the single "interest_rate" model, and the paths will take longer to revert to mean levels. 
    
    If users' intended area of usage is not influenced by stocks and house prices, the "interest_rate" model would be a good choice. If, otherwise, comovements among the financial variables are deemed important, the "interest_house_stock" model is suggested. 

* Choosing between "independent" and "correlated" factor models:

    The correlated-factor model assumes correlation among level, slope, and curvature of the interest rate term structure, while the independent-factor model does not. Note that stock prices and house indexes are always correlated with the interest rate. 
    
    The correlated-factor model takes a more holistic view on the underlying term structure of interest. Meanwhile, it generates more volatile simulations, and it takes longer to revert to mean levels. 

&nbsp;&nbsp; **Notes:**

(a) Large percentage changes appear if the original values are near-zero, or if the Gaussian noise is large, though with low probabilities. This happens especially for interest rates in the first few periods due to historical-low rates in 2021. 

(b) Negative simulated interest rates are allowed since the Arbitrage-Free Nelson Siegel model does not impose non-negativity constraints. On the other hand, the stock prices and home value indexes must be positive, since simulations were done using log transforms, which is an implicit assumption of Geometric Brownian Motions. 

&nbsp;&nbsp; **References:**

Christensen, J. H., Diebold, F. X. & Rudebusch, G. D. (2011), ‘The affine arbitrage-free class of nelson–siegel term structure models’, _Journal of Econometrics_ 164(1), 4–20.

Christensen, J. H., Lopez, J. A. & Rudebusch, G. D. (2015), ‘Analytical formulas for the second moment in affine models with stochastic volatility’.
